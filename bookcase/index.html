<html lang="zh-CN">
 <head></head>
 <body>
  <meta charset="utf-8">
  <title>书 | Think&sup2;&ordm;&sup1;&sup1;</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="og:type" content="blog">
  <meta name="og:title">
  <meta name="og:url" content="http://think2011.github.io/bookcase/">
  <meta name="og:image">
  <meta name="og:site_name" content="Think&sup2;&ordm;&sup1;&sup1;">
  <meta name="og:description">
  <meta name="twitter:card" content="summary">
  <link rel="alternative" href="/atom.xml" title="Think&sup2;&ordm;&sup1;&sup1;" type="application/atom+xml">
  <link rel="icon" href="/favicon.png">
  <link href="http://fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="http://cdn.staticfile.org/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <div id="container">
   <div id="wrap">
    <header id="header">
     <div id="banner"></div>
     <div id="header-outer" class="outer">
      <div id="header-title" class="inner">
       <h1 id="logo-wrap"> <a href="/" id="logo">Think&sup2;&ordm;&sup1;&sup1;</a> </h1>
       <h2 id="subtitle-wrap"> <a href="/" id="subtitle">当思维和视野不再被日常熟悉的事情所局限时，就能发现更大的世界。Stay Hungry, Stay Foolish.</a> </h2>
      </div>
      <div id="header-inner" class="inner">
       <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <a class="main-nav-link" href="/">首页</a>
        <a class="main-nav-link" href="/bookcase">很多很多书</a>
        <a class="main-nav-link" href="/about">我</a>
       </nav>
       <nav id="sub-nav">
        <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
       </nav>
       <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
         <input type="search" name="q" results="0" class="search-form-input" placeholder="Search">
         <input type="submit" class="search-form-submit">
         <input type="hidden" name="q" value="site:http://think2011.github.io">
        </form>
       </div>
      </div>
     </div>
    </header>
    <div class="outer">
    <!-- 加载提示 -->
    <i class="fa fa-spinner fa-spin" style="
    font-size: 50px;
    margin: 20px auto;
    position: relative;
    left: 50%;
    color: #979797;
    "></i>

     <span id="close" class="back">←</span>
     <ul id="tp-grid" class="tp-grid">
      <!-- 自动生成 -->
     </ul>
    </div>

    <footer id="footer">
     <div class="outer">
      <div id="footer-info" class="inner">
        &copy; 2014 曾浩
       <br> Powered by
       <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
      </div>
     </div>
    </footer>
    <!-- 百度统计 -->
    <script type="text/javascript">
            var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
            document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F33ef2e00d0bf27844f5b56241c6b6bb1' type='text/javascript'%3E%3C/script%3E"));
        </script>
   </div>
   <nav id="mobile-nav">
    <a href="/archives" class="mobile-nav-link">归档</a>
    <a href="/categories/作品" class="mobile-nav-link">作品</a>
    <a href="/bookcase" class="mobile-nav-link">书</a>
    <a href="/about" class="mobile-nav-link">我</a>
   </nav>
   <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
   <script type="text/javascript" src="/js/script.js"></script>
   <!-- 书栏目插件区域 -->
   <style>
        #tp-grid {
            margin: 20px 0;
        }

        .tp-grid li img {
            width: 120px;
        }

        .tp-title span:nth-child(2) {
            display: none!important;
        }

        .back {
            border-radius: 50%;
            text-align: center;
            color: #999;
            background: #ddd;
            padding: 7px;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            display: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .back:hover {
            background: #fff;
            background: rgba(255,255,255,0.9);
        }
    </style>
   <link rel="stylesheet" type="text/css" href="css/stapel.css">
   <script src="http://cdn.bootcss.com/modernizr/2.8.3/modernizr.min.js"></script>
   <script type="text/javascript" src="js/jquery.stapel.js"></script>
   <script type="text/javascript" src="books.js"></script>
   <script type="text/javascript">
        $(function() {
            var bookcase = {
                html: function (category, name, url) {
                    var html = '<li title="'+ name +'" data-pile="'+ category +'">' +
                            '<a href="###">' +
                            '<span class="tp-info">' +
                            '<span>'+ name +'</span>' +
                            '</span>' +
                            '<img src="'+ url +'?imageView2/2/w/120/interlace/1" />' +
                            '</a>' +
                            '</li>';
                    return html;
                },

                add: function (category, book) {
                    var _this = this;
                    var html = _this.html(category, book.name, book.url);
                    $('#tp-grid').append(html);
                },

                init: function (books) {
                    var _this = this;
                    // 生成列表
                    $.each(books, function (k ,v) {
                        // 正在看 和 准备看
                        switch (v.reading) {
                            case 1:
                                _this.add('正在看', v);
                                break;

                            case 2:
                                _this.add('准备看', v);
                                break;
                            default :
                            //
                        }

                        // 分类
                        switch (v.type) {
                            case '前端':
                                _this.add('前端', v);
                                break;

                            case '后端':
                                _this.add('后端', v);
                                break;

                            case '体验':
                                _this.add('体验', v);
                                break;

                            case '其他':
                                _this.add('其他', v);
                                break;
                            default :
                            //
                        }
                    });

                    // 排序
                    $('[data-pile="正在看"]').appendTo('#tp-grid');
                    $('[data-pile="准备看"]').appendTo('#tp-grid');
                    $('[data-pile="前端"]').appendTo('#tp-grid');
                    $('[data-pile="后端"]').appendTo('#tp-grid');
                    $('[data-pile="体验"]').appendTo('#tp-grid');
                    $('[data-pile="其他"]').appendTo('#tp-grid');


                    $('[data-pile="体验"]:last').after($('[title="在你身边 为你设计"]'));
                }
            }

            bookcase.init(window.books);
            var $grid = $('#tp-grid'),
                    $name = $('#name'),
                    $close = $('#close');

            var stapel = $grid.stapel({
                delay: 10,
                onLoad: function () {
                  $('.fa-spinner').fadeOut();
                },
                onBeforeOpen: function (pileName) {
                    $name.html(pileName);
                },
                onAfterOpen: function () {
                    $close.fadeIn();
                }
            });

            $close.on('click', function () {
                $close.hide();
                $name.empty();
                stapel.closePile();
            });

        } );
    </script>
  </div>
 </body>
</html>
